@page "/"
@inject GuessService _guessService;
@implements IDisposable;

@code
{
    readonly string[] _possibleWords = File.ReadAllLines("wordlist.txt");
    IEnumerable<string> _filteredWords;

    int guessLines = 1;

    private void AddDelGuess(int num)
    {
        guessLines += num;
    }
    
    protected override void OnInitialized()
    {
        _filteredWords = _possibleWords.Take(20);
        _guessService.OnChange += FilterWordList;
    }

    public void Dispose()
    {
        _guessService.OnChange -= FilterWordList;
    }

    public void FilterWordList()
    {
        
        StateHasChanged();
    }

}

<h1>Blazordle - a Wordle solver</h1>

<p>There are @_possibleWords.Length words in the list.</p>
<p>To start, enter a 5-letter guess and its hints.</p>

<p>@foreach (var guess in _guessService.guesses)
   {
       @guess
   }
    </p>

<div class="container">
    <div class="wordle-board">
        <!-- Each .wordle-row represents a row for guesses -->

        @for (int i = 1; i <= guessLines; i++)
        {
            <WordleGuess></WordleGuess>
        }
        <button @onclick="() => AddDelGuess(1)">Add</button>
        <button @onclick="() => AddDelGuess(-1)">Del</button>

    </div>

    <div class="word-list">
        <ol>
            @foreach (var word in _filteredWords)
            {
                <li>@word</li>
            }
        </ol>
    </div>
</div>